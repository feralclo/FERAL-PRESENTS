/*
 * Aurora Theme — Tailwind CSS entry point for public event pages
 *
 * CRITICAL: Mirrors the admin's tailwind.css scoping pattern.
 * Preflight reset is scoped to [data-theme="aurora"] inside @layer aurora-reset.
 * Utilities are imported UNLAYERED so they beat the * { margin: 0 } in base.css
 * (class selectors > universal selector on specificity).
 *
 * This file only activates inside [data-theme="aurora"] — no impact on
 * Midnight, Daylight, or any other theme.
 */

/* Layer order — aurora-reset is BELOW unlayered utilities */
@layer theme, aurora-reset;
@import "tailwindcss/theme" layer(theme);

/* Utilities are UNLAYERED — this is intentional. See tailwind.css comment. */
@import "tailwindcss/utilities";

/*
 * Aurora Design Tokens — "Deep Space Indigo"
 *
 * Color architecture:
 *   Background: #070b14 — near-black with cool blue undertone
 *   Surface:    #0d1424 — elevated surfaces, subtle depth
 *   Card:       #111b2e — glass-morphism base
 *   Border:     #1a2844 — blue-tinted, subtle
 *   Accent:     #6366f1 — Indigo 500 (customizable via branding)
 *   Warm:       #ec4899 — Pink 500, urgency/secondary accent
 *
 * All tokens map from branding CSS vars so the live editor works.
 */
@theme inline {
  /* ── Core palette (derives from branding CSS vars where possible) ── */
  --color-aurora-bg: var(--bg-dark, #070b14);
  --color-aurora-surface: color-mix(in srgb, var(--bg-dark, #070b14) 85%, #1e3a6e);
  --color-aurora-card: color-mix(in srgb, var(--card-bg, #111b2e) 90%, #1e3a6e);
  --color-aurora-border: color-mix(in srgb, var(--card-bg, #111b2e) 60%, #3b5998);
  --color-aurora-accent: var(--accent, #6366f1);
  --color-aurora-accent-warm: #ec4899;
  --color-aurora-text: var(--text-primary, #e8ecf4);
  --color-aurora-text-secondary: color-mix(in srgb, var(--text-primary, #e8ecf4) 55%, #4a6ea0);
  --color-aurora-success: #10b981;
  --color-aurora-warning: #f59e0b;
  --color-aurora-glow: color-mix(in srgb, var(--accent, #6366f1) 15%, transparent);

  /* ── Semantic aliases ── */
  --color-background: var(--color-aurora-bg);
  --color-foreground: var(--color-aurora-text);
  --color-card: var(--color-aurora-card);
  --color-card-foreground: var(--color-aurora-text);
  --color-primary: var(--color-aurora-accent);
  --color-primary-foreground: #ffffff;
  --color-secondary: var(--color-aurora-surface);
  --color-secondary-foreground: var(--color-aurora-text);
  --color-muted: var(--color-aurora-surface);
  --color-muted-foreground: var(--color-aurora-text-secondary);
  --color-border: var(--color-aurora-border);
  --color-input: var(--color-aurora-border);
  --color-ring: var(--color-aurora-accent);
  --color-destructive: #ef4444;
  --color-destructive-foreground: #ffffff;
  --color-success: var(--color-aurora-success);

  /* ── Radii ── */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-2xl: 1.25rem;

  /* ── Typography ── */
  --font-display: var(--font-mono, 'Satoshi', 'DM Sans', 'Inter', sans-serif);
  --font-body: var(--font-sans, 'Inter', -apple-system, BlinkMacSystemFont, sans-serif);
}

/*
 * Aurora-scoped Preflight — provides base reset inside [data-theme="aurora"].
 *
 * CRITICAL: Must be in @layer aurora-reset so unlayered Tailwind utilities
 * always override it (same pattern as admin's @layer admin-reset).
 */
@layer aurora-reset {
  [data-theme="aurora"] {
    font-family: var(--font-body);
    color: var(--color-aurora-text);
    background-color: var(--color-aurora-bg);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.6;
  }

  [data-theme="aurora"] *,
  [data-theme="aurora"] *::before,
  [data-theme="aurora"] *::after {
    border-color: var(--color-aurora-border);
  }

  [data-theme="aurora"] h1,
  [data-theme="aurora"] h2,
  [data-theme="aurora"] h3,
  [data-theme="aurora"] h4,
  [data-theme="aurora"] h5,
  [data-theme="aurora"] h6 {
    font-family: var(--font-display);
    font-size: inherit;
    font-weight: inherit;
  }

  [data-theme="aurora"] a {
    color: inherit;
    text-decoration: inherit;
  }

  [data-theme="aurora"] button {
    font: inherit;
    color: inherit;
    background: transparent;
    border: 0;
    padding: 0;
    margin: 0;
    cursor: pointer;
  }

  [data-theme="aurora"] input,
  [data-theme="aurora"] textarea,
  [data-theme="aurora"] select {
    font: inherit;
    color: inherit;
    background: transparent;
    margin: 0;
  }

  [data-theme="aurora"] img,
  [data-theme="aurora"] svg {
    display: inline;
    max-width: initial;
  }
}

/* ── Scrollbar ── */
[data-theme="aurora"] {
  scrollbar-width: thin;
  scrollbar-color: var(--color-aurora-border) transparent;
}
[data-theme="aurora"] ::-webkit-scrollbar { width: 5px; height: 5px; }
[data-theme="aurora"] ::-webkit-scrollbar-track { background: transparent; }
[data-theme="aurora"] ::-webkit-scrollbar-thumb { background: var(--color-aurora-border); border-radius: 4px; }
[data-theme="aurora"] ::-webkit-scrollbar-thumb:hover { background: color-mix(in srgb, var(--color-aurora-border) 80%, white); }

/* ── Autofill ── */
[data-theme="aurora"] input:-webkit-autofill,
[data-theme="aurora"] input:-webkit-autofill:hover,
[data-theme="aurora"] input:-webkit-autofill:focus {
  -webkit-box-shadow: 0 0 0 40px var(--color-aurora-card) inset !important;
  -webkit-text-fill-color: var(--color-aurora-text) !important;
  caret-color: var(--color-aurora-text) !important;
  transition: background-color 5000s ease-in-out 0s;
}
